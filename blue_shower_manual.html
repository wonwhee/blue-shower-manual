<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blue Shower v1.0 제작 매뉴얼</title>
    <style>
        /* 시스템 폰트 스택 */
        * {
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --bg-color: #ffffff;
            --text-color: #1f2937;
            --border-color: #e5e7eb;
            --code-bg: #f3f4f6;
            --warning-bg: #fef3c7;
            --warning-border: #f59e0b;
            --success-bg: #dcfce7;
            --success-border: #16a34a;
            --info-bg: #dbeafe;
            --info-border: #3b82f6;
            --font-size: 16px;
        }

        [data-theme="dark"] {
            --bg-color: #1f2937;
            --text-color: #f9fafb;
            --border-color: #374151;
            --code-bg: #374151;
            --warning-bg: #78350f;
            --success-bg: #14532d;
            --info-bg: #1e3a8a;
        }

        [data-contrast="high"] {
            --primary-color: #000000;
            --text-color: #000000;
            --bg-color: #ffffff;
            --border-color: #000000;
        }

        [data-theme="dark"][data-contrast="high"] {
            --primary-color: #ffffff;
            --text-color: #ffffff;
            --bg-color: #000000;
            --border-color: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: var(--font-size);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* 헤더 및 네비게이션 */
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .btn:hover, .btn:focus {
            background: rgba(255, 255, 255, 0.3);
            outline: 2px solid white;
            outline-offset: 2px;
        }

        /* 목차 */
        .toc {
            background: var(--info-bg);
            border: 2px solid var(--info-border);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .toc h2 {
            margin-top: 0;
            color: var(--info-border);
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.5rem;
        }

        .toc a {
            color: var(--text-color);
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: block;
        }

        .toc a:hover, .toc a:focus {
            background: var(--primary-color);
            color: white;
            outline: 2px solid var(--primary-color);
        }

        /* 검색 */
        .search-container {
            margin: 1rem 0;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--bg-color);
            color: var(--text-color);
        }

        .search-input:focus {
            outline: 2px solid var(--primary-color);
            border-color: var(--primary-color);
        }

        /* Hero 섹션 */
        .hero {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, var(--info-bg), var(--success-bg));
            margin: 2rem 0;
            border-radius: 12px;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .hero-subtitle {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            color: var(--text-color);
        }

        .badges {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .badge {
            background: var(--warning-bg);
            color: var(--warning-border);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            border: 2px solid var(--warning-border);
        }

        /* 섹션 */
        .section {
            margin: 3rem 0;
            scroll-margin-top: 80px;
        }

        .section h2 {
            font-size: 2rem;
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .section h3 {
            font-size: 1.5rem;
            color: var(--text-color);
            margin-top: 2rem;
        }

        /* 카드 */
        .card {
            background: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        /* 테이블 */
        .table-container {
            overflow-x: auto;
            margin: 1rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        th {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background: var(--code-bg);
        }

        /* 코드 블록 */
        .code-block {
            background: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            position: relative;
            overflow-x: auto;
        }

        .code-block code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
        }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* 경고박스 */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .alert-warning {
            background: var(--warning-bg);
            border-left-color: var(--warning-border);
            color: #92400e;
        }

        .alert-success {
            background: var(--success-bg);
            border-left-color: var(--success-border);
            color: #166534;
        }

        .alert-info {
            background: var(--info-bg);
            border-left-color: var(--info-border);
            color: #1e40af;
        }

        .alert-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        /* 체크리스트 */
        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: var(--code-bg);
            border-radius: 4px;
        }

        .checklist input[type="checkbox"] {
            width: 1.2rem;
            height: 1.2rem;
            cursor: pointer;
        }

        /* FAQ (접이식) */
        .faq-item {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin: 0.5rem 0;
        }

        .faq-question {
            background: var(--code-bg);
            padding: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }

        .faq-question:hover {
            background: var(--border-color);
        }

        .faq-answer {
            padding: 1rem;
            display: none;
            border-top: 1px solid var(--border-color);
        }

        .faq-answer.active {
            display: block;
        }

        .faq-toggle {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .faq-toggle.active {
            transform: rotate(180deg);
        }

        /* 다운로드 버튼 */
        .download-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .download-btn {
            background: var(--success-bg);
            border: 2px solid var(--success-border);
            color: var(--success-border);
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
            font-weight: bold;
        }

        .download-btn:hover, .download-btn:focus {
            background: var(--success-border);
            color: white;
            outline: 2px solid var(--success-border);
            outline-offset: 2px;
        }

        /* SVG 다이어그램 */
        .diagram-container {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
            padding: 1rem;
            background: var(--code-bg);
            border-radius: 8px;
        }

        /* 반응형 */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .controls {
                justify-content: center;
            }
            
            .toc-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 인쇄 스타일 */
        @media print {
            * {
                background: white !important;
                color: black !important;
                box-shadow: none !important;
            }
            
            .header, .controls, .search-container {
                display: none !important;
            }
            
            .section {
                page-break-inside: avoid;
                margin: 1rem 0;
            }
            
            .card {
                border: 1px solid black;
                margin: 0.5rem 0;
            }
            
            @page {
                margin: 15mm;
            }
        }

        /* 스무스 스크롤 */
        html {
            scroll-behavior: smooth;
        }

        /* 포커스 스타일 */
        *:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">Blue Shower v1.0 매뉴얼</div>
                <div class="controls">
                    <button class="btn" onclick="toggleTheme()">🌓 다크모드</button>
                    <button class="btn" onclick="toggleContrast()">🔲 고대비</button>
                    <button class="btn" onclick="changeFontSize(-2)">🔤- 작게</button>
                    <button class="btn" onclick="changeFontSize(2)">🔤+ 크게</button>
                    <button class="btn" onclick="window.print()">🖨️ 인쇄</button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- 검색 -->
        <div class="search-container">
            <input type="text" class="search-input" placeholder="🔍 매뉴얼 내용 검색..." oninput="searchContent(this.value)">
        </div>

        <!-- Hero 섹션 -->
        <section class="hero">
            <h1>Blue Shower v1.0</h1>
            <p class="hero-subtitle">발 버튼으로 헤드 좌/우·상/하 + 물 ON/OFF 제어하는 보조기기</p>
            <div class="badges">
                <span class="badge" style="background: var(--success-bg); color: var(--success-border); border-color: var(--success-border);">쉬운 조립</span>
                <span class="badge" style="background: var(--success-bg); color: var(--success-border); border-color: var(--success-border);">발로 간편 제어</span>
                <span class="badge" style="background: var(--success-bg); color: var(--success-border); border-color: var(--success-border);">3D 프린트 DIY</span>
                <span class="badge" style="background: var(--success-bg); color: var(--success-border); border-color: var(--success-border);">오픈소스</span>
                <span class="badge" style="background: var(--success-bg); color: var(--success-border); border-color: var(--success-border);">누구나 제작 가능</span>
                <span class="badge" style="background: var(--success-bg); color: var(--success-border); border-color: var(--success-border);">자유로운 커스터마이징</span>
            </div>
        </section>

        <!-- 목차 -->
        <section class="toc">
            <h2>📋 목차</h2>
            <nav class="toc-grid" role="navigation" aria-label="페이지 목차">
                <a href="#quick-start">⚡ 빠른 시작</a>
                <a href="#materials">📦 준비물</a>
                <a href="#printing">🖨️ 3D 프린트</a>
                <a href="#assembly">🔧 조립</a>
                <a href="#wiring">⚡ 배선</a>
                <a href="#software">💻 소프트웨어</a>
                <a href="#testing">✅ 동작 점검</a>
                <a href="#troubleshooting">🔧 문제 해결</a>
                <a href="#safety">⚠️ 안전 고지</a>
                <a href="#downloads">📁 제출물</a>
                <a href="#license">📄 라이선스</a>
            </nav>
        </section>

        <!-- 빠른 시작 -->
        <section id="quick-start" class="section">
            <h2>⚡ 빠른 시작 (5단계)</h2>
            <div class="card-grid">
                <div class="card">
                    <h3>1️⃣ 프린트</h3>
                    <p>3D 프린터로 밑받침대, 모터 브래킷, 레일 브래킷을 출력합니다.</p>
                </div>
                <div class="card">
                    <h3>2️⃣ 조립</h3>
                    <p>선형 레일 → 헤드 → 밸브 → 버튼 순서로 조립합니다.</p>
                </div>
                <div class="card">
                    <h3>3️⃣ 배선</h3>
                    <p>라즈베리 파이와 L298N, 솔레노이드를 연결합니다. 모든 GND를 공통으로 연결하세요.</p>
                </div>
                <div class="card">
                    <h3>4️⃣ 실행</h3>
                    <p>파이썬 스크립트를 실행하여 동작을 확인합니다.</p>
                </div>
                <div class="card">
                    <h3>5️⃣ 점검</h3>
                    <p>각 버튼의 반응과 모터, 밸브 동작을 테스트합니다.</p>
                </div>
            </div>
        </section>

        <!-- 준비물 -->
        <section id="materials" class="section">
            <h2>📦 준비물</h2>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>분류</th>
                            <th>품목</th>
                            <th>수량</th>
                            <th>비고</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="5">전자부품</td>
                            <td>Raspberry Pi 4B</td>
                            <td>1개</td>
                            <td>4GB RAM 이상 권장</td>
                        </tr>
                        <tr>
                            <td>L298N 모터 드라이버</td>
                            <td>1개</td>
                            <td>8298N도 호환</td>
                        </tr>
                        <tr>
                            <td>DC 기어드 모터 12V</td>
                            <td>2개</td>
                            <td>좌우용, 상하용</td>
                        </tr>
                        <tr>
                            <td>솔레노이드 밸브</td>
                            <td>1개</td>
                            <td>12V/24V, 3.3V 트리거 릴레이 필요</td>
                        </tr>
                        <tr>
                            <td>소형 택트 버튼</td>
                            <td>5개</td>
                            <td>좌/우/상/하/물 제어용</td>
                        </tr>
                        <tr>
                            <td rowspan="2">기구부품</td>
                            <td>선형 레일 400mm</td>
                            <td>2개</td>
                            <td>좌우용 1개, 상하용 1개</td>
                        </tr>
                        <tr>
                            <td>볼트/너트 세트</td>
                            <td>1세트</td>
                            <td>M3, M4 규격</td>
                        </tr>
                        <tr>
                            <td rowspan="2">배관</td>
                            <td>호스 (내경 6mm)</td>
                            <td>2m</td>
                            <td>입수용, 출수용</td>
                        </tr>
                        <tr>
                            <td>호스 연결구</td>
                            <td>4개</td>
                            <td>밸브 연결용</td>
                        </tr>
                        <tr>
                            <td rowspan="4">3D 프린트</td>
                            <td>버튼 데크 (외부)</td>
                            <td>1개</td>
                            <td>별도 제출 파일</td>
                        </tr>
                        <tr>
                            <td>밑받침대</td>
                            <td>1개</td>
                            <td>PLA, 30% 인필</td>
                        </tr>
                        <tr>
                            <td>모터 듀얼 브래킷</td>
                            <td>1개</td>
                            <td>PLA, 40% 인필 권장</td>
                        </tr>
                        <tr>
                            <td>레일 연결 브래킷</td>
                            <td>2개</td>
                            <td>PLA, 30% 인필</td>
                        </tr>
                        <tr>
                            <td rowspan="3">공구</td>
                            <td>육각렌치 세트</td>
                            <td>1세트</td>
                            <td>볼트 체결용</td>
                        </tr>
                        <tr>
                            <td>전선 스트리퍼</td>
                            <td>1개</td>
                            <td>배선 작업용</td>
                        </tr>
                        <tr>
                            <td>멀티미터</td>
                            <td>1개</td>
                            <td>전압/연결 확인용</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 3D 프린트 가이드 -->
        <section id="printing" class="section">
            <h2>🖨️ 3D 프린트 가이드</h2>
            
            <div class="alert alert-info">
                <span class="alert-icon">💡</span>
                <div>
                    <strong>추천 프린터 설정</strong><br>
                    노즐: 0.4mm / 레이어: 0.2mm / 인필: 30% (모터 브래킷은 40% 이상 권장)
                </div>
            </div>

            <h3>프린트 파일 목록</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>🔘 버튼 데크 (외부)</h4>
                    <p>버튼 데크 (외부 3D 파일, 별도 제출)</p>
                    <div class="alert alert-warning">
                        <span class="alert-icon">⚠️</span>
                        <div>외부 제공 파일로 별도 제출됩니다.</div>
                    </div>
                </div>
                <div class="card">
                    <h4>🏗️ 밑받침대</h4>
                    <p>전체 시스템을 지지하는 기본 베이스</p>
                    <ul>
                        <li>인필: 30%</li>
                        <li>서포트: 필요시만</li>
                        <li>배치: 평면이 바닥에 닿도록</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>⚙️ 모터 듀얼 브래킷</h4>
                    <p>좌우, 상하 모터를 동시에 고정</p>
                    <ul>
                        <li>인필: 40% 이상 (강도 중요)</li>
                        <li>서포트: 필수</li>
                        <li>배치: 구멍이 위로 오도록</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>🔗 레일 연결 브래킷</h4>
                    <p>선형 레일과 모터를 연결 (2개 필요)</p>
                    <ul>
                        <li>인필: 30%</li>
                        <li>서포트: 불필요</li>
                        <li>배치: 평면 부분이 바닥에</li>
                    </ul>
                </div>
            </div>

            <div class="alert alert-success">
                <span class="alert-icon">✅</span>
                <div>
                    <strong>프린트 성공 팁</strong><br>
                    • 첫 레이어 높이를 정확히 조절하세요<br>
                    • 모터 브래킷은 강도가 중요하므로 인필을 높여주세요<br>
                    • 서포트 제거 후 구멍 크기를 확인하세요
                </div>
            </div>
        </section>

        <!-- 시스템 구조 다이어그램 -->
        <section id="diagram" class="section">
            <h2>📊 시스템 구조</h2>
            <div class="diagram-container">
                <svg width="800" height="500" role="img" aria-label="Blue Shower 시스템 블록 다이어그램: 버튼에서 라즈베리 파이로, 라즈베리 파이에서 L298N 모터드라이버와 릴레이로, 각각 모터와 솔레노이드로 연결되는 구조">
                    <!-- 버튼 블록 -->
                    <rect x="50" y="50" width="120" height="80" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="5"/>
                    <text x="110" y="85" text-anchor="middle" font-size="12" font-weight="bold">버튼 5개</text>
                    <text x="110" y="100" text-anchor="middle" font-size="10">(소형 택트)</text>
                    <text x="110" y="115" text-anchor="middle" font-size="9">좌/우/상/하/물</text>
                    
                    <!-- 라즈베리 파이 -->
                    <rect x="300" y="200" width="140" height="100" fill="#dcfce7" stroke="#16a34a" stroke-width="3" rx="5"/>
                    <text x="370" y="235" text-anchor="middle" font-size="14" font-weight="bold">Raspberry Pi</text>
                    <text x="370" y="250" text-anchor="middle" font-size="11">GPIO 제어</text>
                    <text x="370" y="265" text-anchor="middle" font-size="10">Python 스크립트</text>
                    <text x="370" y="285" text-anchor="middle" font-size="10">5V 전원</text>
                    
                    <!-- L298N 모터드라이버 -->
                    <rect x="550" y="100" width="120" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                    <text x="610" y="130" text-anchor="middle" font-size="12" font-weight="bold">L298N</text>
                    <text x="610" y="145" text-anchor="middle" font-size="10">모터드라이버</text>
                    <text x="610" y="165" text-anchor="middle" font-size="9">IN1~4</text>
                    
                    <!-- 릴레이/MOSFET -->
                    <rect x="550" y="300" width="120" height="80" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="5"/>
                    <text x="610" y="330" text-anchor="middle" font-size="12" font-weight="bold">Relay</text>
                    <text x="610" y="345" text-anchor="middle" font-size="10">/ MOSFET</text>
                    <text x="610" y="365" text-anchor="middle" font-size="9">3.3V 트리거</text>
                    
                    <!-- 모터 A (좌우) -->
                    <rect x="720" y="50" width="100" height="60" fill="#fee2e2" stroke="#dc2626" stroke-width="2" rx="5"/>
                    <text x="770" y="75" text-anchor="middle" font-size="11" font-weight="bold">Motor A</text>
                    <text x="770" y="90" text-anchor="middle" font-size="9">좌/우 이동</text>
                    
                    <!-- 모터 B (상하) -->
                    <rect x="720" y="130" width="100" height="60" fill="#fee2e2" stroke="#dc2626" stroke-width="2" rx="5"/>
                    <text x="770" y="155" text-anchor="middle" font-size="11" font-weight="bold">Motor B</text>
                    <text x="770" y="170" text-anchor="middle" font-size="9">상/하 이동</text>
                    
                    <!-- 솔레노이드 밸브 -->
                    <rect x="720" y="300" width="100" height="60" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" rx="5"/>
                    <text x="770" y="325" text-anchor="middle" font-size="11" font-weight="bold">Solenoid</text>
                    <text x="770" y="340" text-anchor="middle" font-size="9">밸브 ON/OFF</text>
                    
                    <!-- 전원부 -->
                    <rect x="50" y="400" width="200" height="80" fill="#f3f4f6" stroke="#6b7280" stroke-width="2" rx="5"/>
                    <text x="150" y="430" text-anchor="middle" font-size="12" font-weight="bold">전원부</text>
                    <text x="150" y="445" text-anchor="middle" font-size="10">12V/24V (모터·밸브)</text>
                    <text x="150" y="460" text-anchor="middle" font-size="10">5V (라즈베리 파이)</text>
                    
                    <!-- GND 공통 표시 -->
                    <rect x="350" y="400" width="200" height="50" fill="#ef4444" stroke="#dc2626" stroke-width="3" rx="5"/>
                    <text x="450" y="430" text-anchor="middle" font-size="14" font-weight="bold" fill="white">⚠️ 모든 GND 공통 ⚠️</text>
                    
                    <!-- 화살표들 -->
                    <!-- 버튼 → 라즈베리파이 -->
                    <line x1="170" y1="90" x2="280" y2="220" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="220" y="150" font-size="9" fill="#374151">GPIO 입력</text>
                    
                    <!-- 라즈베리파이 → L298N -->
                    <line x1="440" y1="230" x2="530" y2="140" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="480" y="180" font-size="9" fill="#374151">IN1~4</text>
                    
                    <!-- 라즈베리파이 → 릴레이 -->
                    <line x1="440" y1="270" x2="530" y2="340" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <text x="480" y="310" font-size="9" fill="#374151">GPIO22</text>
                    
                    <!-- L298N → 모터들 -->
                    <line x1="670" y1="120" x2="700" y2="80" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <line x1="670" y1="160" x2="700" y2="160" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <!-- 릴레이 → 솔레노이드 -->
                    <line x1="670" y1="340" x2="700" y2="330" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
                    
                    <!-- 전원 연결선들 -->
                    <line x1="150" y1="400" x2="370" y2="320" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5"/>
                    <line x1="250" y1="430" x2="610" y2="200" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5"/>
                    
                    <!-- 화살표 마커 정의 -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
                        </marker>
                    </defs>
                </svg>
            </div>
        </section>

        <!-- 조립 -->
        <section id="assembly" class="section">
            <h2>🔧 조립</h2>
            
            <div class="alert alert-warning">
                <span class="alert-icon">⚠️</span>
                <div>
                    <strong>조립 전 확인사항</strong><br>
                    • 모든 3D 프린트 파트의 구멍 크기를 확인하세요<br>
                    • 볼트와 너트를 미리 분류해 두세요<br>
                    • 작업 공간을 충분히 확보하세요
                </div>
            </div>

            <h3>조립 순서</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>1️⃣ 선형 레일 설치</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 밑받침대에 좌우 레일을 고정합니다</li>
                        <li><input type="checkbox"> 상하 레일을 수직으로 조립합니다</li>
                        <li><input type="checkbox"> 레일 연결 브래킷으로 두 레일을 연결합니다</li>
                    </ul>
                    <div class="alert alert-info">
                        <span class="alert-icon">💡</span>
                        <div>레일의 움직임이 부드러운지 손으로 확인하세요</div>
                    </div>
                </div>
                
                <div class="card">
                    <h4>2️⃣ 모터 설치</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 모터 듀얼 브래킷에 두 모터를 고정합니다</li>
                        <li><input type="checkbox"> 모터와 레일을 연결합니다</li>
                        <li><input type="checkbox"> 모터 회전 방향을 수동으로 확인합니다</li>
                    </ul>
                    <div class="alert alert-warning">
                        <span class="alert-icon">⚠️</span>
                        <div>모터 고정 시 과도한 힘을 가하지 마세요</div>
                    </div>
                </div>
                
                <div class="card">
                    <h4>3️⃣ 헤드 조립</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 샤워 헤드를 상하 레일에 연결합니다</li>
                        <li><input type="checkbox"> 헤드가 좌우, 상하로 자유롭게 움직이는지 확인합니다</li>
                        <li><input type="checkbox"> 호스 연결부를 임시로 연결합니다</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>4️⃣ 솔레노이드 밸브 설치</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 밸브의 화살표 방향을 확인합니다</li>
                        <li><input type="checkbox"> 입수부와 출수부 호스를 연결합니다</li>
                        <li><input type="checkbox"> 밸브를 안전한 위치에 고정합니다</li>
                    </ul>
                    <div class="alert alert-success">
                        <span class="alert-icon">✅</span>
                        <div>밸브 화살표는 물의 흐름 방향을 나타냅니다</div>
                    </div>
                </div>
                
                <div class="card">
                    <h4>5️⃣ 버튼 데크 설치</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 5개 택트 버튼을 버튼 데크에 삽입합니다</li>
                        <li><input type="checkbox"> 각 버튼의 기능을 라벨로 표시합니다</li>
                        <li><input type="checkbox"> 버튼 데크를 사용자가 쉽게 접근할 수 있는 위치에 배치합니다</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>6️⃣ 최종 점검</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 모든 볼트가 단단히 조여졌는지 확인합니다</li>
                        <li><input type="checkbox"> 움직이는 부품들이 서로 간섭하지 않는지 확인합니다</li>
                        <li><input type="checkbox"> 전선을 배선하기 전 마지막으로 조립 상태를 점검합니다</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 배선 -->
        <section id="wiring" class="section">
            <h2>⚡ 배선</h2>
            
            <div class="alert alert-warning">
                <span class="alert-icon">⚠️</span>
                <div>
                    <strong>배선 필수 규칙</strong><br>
                    <strong>모든 GND(마이너스, 검은 선)는 반드시 공통으로 연결하세요!</strong><br>
                    라즈베리 파이, L298N, 릴레이, 전원공급장치의 GND를 모두 연결해야 합니다.
                </div>
            </div>

            <h3>🔘 버튼 연결 (내부 풀업 방식)</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>기능</th>
                            <th>라즈베리 파이 GPIO (BCM)</th>
                            <th>버튼 연결</th>
                            <th>동작</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>좌측 이동</td>
                            <td>GPIO 5</td>
                            <td>한쪽: GPIO5, 다른쪽: GND</td>
                            <td>눌렀을 때 0(LOW)</td>
                        </tr>
                        <tr>
                            <td>우측 이동</td>
                            <td>GPIO 6</td>
                            <td>한쪽: GPIO6, 다른쪽: GND</td>
                            <td>눌렀을 때 0(LOW)</td>
                        </tr>
                        <tr>
                            <td>상향 이동</td>
                            <td>GPIO 13</td>
                            <td>한쪽: GPIO13, 다른쪽: GND</td>
                            <td>눌렀을 때 0(LOW)</td>
                        </tr>
                        <tr>
                            <td>하향 이동</td>
                            <td>GPIO 19</td>
                            <td>한쪽: GPIO19, 다른쪽: GND</td>
                            <td>눌렀을 때 0(LOW)</td>
                        </tr>
                        <tr>
                            <td>물 ON/OFF</td>
                            <td>GPIO 26</td>
                            <td>한쪽: GPIO26, 다른쪽: GND</td>
                            <td>짧게 눌러 토글</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>⚙️ L298N 모터드라이버 연결</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>L298N 핀</th>
                            <th>라즈베리 파이 GPIO (BCM)</th>
                            <th>기능</th>
                            <th>비고</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>IN1</td>
                            <td>GPIO 17</td>
                            <td>모터 A 방향1 (좌측)</td>
                            <td rowspan="4">좌우 모터 = A, 상하 모터 = B</td>
                        </tr>
                        <tr>
                            <td>IN2</td>
                            <td>GPIO 27</td>
                            <td>모터 A 방향2 (우측)</td>
                        </tr>
                        <tr>
                            <td>IN3</td>
                            <td>GPIO 23</td>
                            <td>모터 B 방향1 (상향)</td>
                        </tr>
                        <tr>
                            <td>IN4</td>
                            <td>GPIO 24</td>
                            <td>모터 B 방향2 (하향)</td>
                        </tr>
                        <tr>
                            <td>ENA</td>
                            <td>점퍼 연결</td>
                            <td>모터 A 속도 제어</td>
                            <td>점퍼로 최대 속도 고정</td>
                        </tr>
                        <tr>
                            <td>ENB</td>
                            <td>점퍼 연결</td>
                            <td>모터 B 속도 제어</td>
                            <td>점퍼로 최대 속도 고정</td>
                        </tr>
                        <tr>
                            <td>GND</td>
                            <td>라즈베리 파이 GND</td>
                            <td>공통 접지</td>
                            <td><strong>필수 연결!</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>🌊 솔레노이드 밸브 연결</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>구성품</th>
                            <th>연결</th>
                            <th>비고</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>라즈베리 파이</td>
                            <td>GPIO 22 → 릴레이 신호핀</td>
                            <td>3.3V 출력으로 릴레이 제어</td>
                        </tr>
                        <tr>
                            <td>릴레이 VCC</td>
                            <td>라즈베리 파이 3.3V</td>
                            <td>릴레이 전원</td>
                        </tr>
                        <tr>
                            <td>릴레이 GND</td>
                            <td>공통 GND</td>
                            <td><strong>반드시 공통 연결!</strong></td>
                        </tr>
                        <tr>
                            <td>솔레노이드 밸브</td>
                            <td>릴레이 스위치 → 12V/24V 전원</td>
                            <td>릴레이로 전원 ON/OFF</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>🔋 전원 연결</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>12V/24V 전원부</h4>
                    <ul>
                        <li><strong>모터 전원:</strong> L298N의 VIN에 연결</li>
                        <li><strong>밸브 전원:</strong> 릴레이를 통해 솔레노이드에 연결</li>
                        <li><strong>GND:</strong> 반드시 공통 GND에 연결</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>5V 전원부</h4>
                    <ul>
                        <li><strong>라즈베리 파이:</strong> USB-C 또는 GPIO 5V 핀</li>
                        <li><strong>릴레이 VCC:</strong> 3.3V 사용 (GPIO에서 공급)</li>
                        <li><strong>GND:</strong> 반드시 공통 GND에 연결</li>
                    </ul>
                </div>
            </div>

            <div class="code-block">
                <button class="copy-btn" onclick="copyToClipboard(this)">복사</button>
                <code># 배선 점검 명령어
# GPIO 상태 확인
gpio readall

# 또는 Python으로 개별 핀 확인
python3 -c "
import RPi.GPIO as GPIO
GPIO.setmode(GPIO.BCM)
GPIO.setup(5, GPIO.IN, pull_up_down=GPIO.PUD_UP)
print('GPIO5 상태:', GPIO.input(5))
GPIO.cleanup()
"</code>
            </div>
        </section>

        <!-- 소프트웨어 -->
        <section id="software" class="section">
            <h2>💻 소프트웨어</h2>
            
            <h3>🐍 파이썬 환경 설치</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyToClipboard(this)">복사</button>
                <code># 시스템 업데이트
sudo apt update && sudo apt upgrade -y

# GPIO 라이브러리 설치
sudo apt install python3-rpi.gpio -y

# 또는 pip로 설치
pip3 install RPi.GPIO</code>
            </div>

            <h3>📁 실행 파일</h3>
            <div class="alert alert-info">
                <span class="alert-icon">💡</span>
                <div>
                    <strong>실행 파일 위치</strong><br>
                    <code>/firmware/blue_shower_pi.py</code><br>
                    (파이썬 코드는 별도 제출 파일에 포함)
                </div>
            </div>

            <h3>🎮 동작 방식</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>🔘 버튼 제어</h4>
                    <ul>
                        <li><strong>좌/우/상/하:</strong> 버튼을 누르고 있는 동안만 이동</li>
                        <li><strong>물 ON/OFF:</strong> 짧게 눌러서 토글 (켜기/끄기)</li>
                        <li><strong>디바운스:</strong> 0.1초 지연으로 오동작 방지</li>
                    </ul>
                </div>
                <div class="card">
                    <h4>⚙️ 모터 제어</h4>
                    <ul>
                        <li><strong>좌측:</strong> IN1=HIGH, IN2=LOW</li>
                        <li><strong>우측:</strong> IN1=LOW, IN2=HIGH</li>
                        <li><strong>상향:</strong> IN3=HIGH, IN4=LOW</li>
                        <li><strong>하향:</strong> IN3=LOW, IN4=HIGH</li>
                    </ul>
                </div>
            </div>

            <h3>🚀 실행 방법</h3>
            <div class="code-block">
                <button class="copy-btn" onclick="copyToClipboard(this)">복사</button>
                <code># 프로그램 실행
cd /firmware
sudo python3 blue_shower_pi.py

# 백그라운드 실행 (선택사항)
sudo python3 blue_shower_pi.py &</code>
            </div>

            <h3>✅ 실행 전 체크리스트</h3>
            <ul class="checklist">
                <li><input type="checkbox"> 모든 GND가 공통으로 연결되었는지 확인</li>
                <li><input type="checkbox"> 전원이 분리되어 공급되는지 확인 (5V, 12V/24V)</li>
                <li><input type="checkbox"> GPIO 핀 번호가 코드와 일치하는지 재확인</li>
                <li><input type="checkbox"> 모터와 밸브 전선이 올바르게 연결되었는지 확인</li>
                <li><input type="checkbox"> 라즈베리 파이에 SD 카드가 제대로 삽입되었는지 확인</li>
            </ul>
        </section>

        <!-- 동작 점검 -->
        <section id="testing" class="section">
            <h2>✅ 동작 점검</h2>
            
            <h3>🔧 단계별 테스트</h3>
            <div class="card-grid">
                <div class="card">
                    <h4>1️⃣ 버튼 반응 테스트</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 좌측 버튼을 눌렀을 때 터미널에 반응 메시지 출력</li>
                        <li><input type="checkbox"> 우측 버튼을 눌렀을 때 터미널에 반응 메시지 출력</li>
                        <li><input type="checkbox"> 상향 버튼을 눌렀을 때 터미널에 반응 메시지 출력</li>
                        <li><input type="checkbox"> 하향 버튼을 눌렀을 때 터미널에 반응 메시지 출력</li>
                        <li><input type="checkbox"> 물 버튼을 눌렀을 때 터미널에 반응 메시지 출력</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>2️⃣ 모터 동작 테스트</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 좌측 버튼 → 헤드가 왼쪽으로 이동</li>
                        <li><input type="checkbox"> 우측 버튼 → 헤드가 오른쪽으로 이동</li>
                        <li><input type="checkbox"> 상향 버튼 → 헤드가 위로 이동</li>
                        <li><input type="checkbox"> 하향 버튼 → 헤드가 아래로 이동</li>
                        <li><input type="checkbox"> 버튼을 놓으면 모터가 즉시 멈춤</li>
                    </ul>
                    <div class="alert alert-warning">
                        <span class="alert-icon">⚠️</span>
                        <div>방향이 반대면 모터 +/- 선을 바꾸거나 IN핀을 교체하세요</div>
                    </div>
                </div>
                
                    <h4>🌊 솔레노이드 밸브 테스트</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 물 버튼을 짧게 누르면 밸브가 열림 (물이 나옴)</li>
                        <li><input type="checkbox"> 물 버튼을 다시 누르면 밸브가 닫힘 (물이 멈춤)</li>
                        <li><input type="checkbox"> 릴레이 동작 시 '딸깍' 소리가 남</li>
                        <li><input type="checkbox"> 연결부에서 물이 새지 않음</li>
                    </ul>
                    <div class="alert alert-success">
                        <span class="alert-icon">✅</span>
                        <div>완벽하게 작동합니다! 필요에 따라 추가 기능도 구현 가능해요</div>
                    </div>
                
                <div class="card">
                    <h4>4️⃣ 종합 동작 테스트</h4>
                    <ul class="checklist">
                        <li><input type="checkbox"> 물을 켠 상태에서 좌우 이동 테스트</li>
                        <li><input type="checkbox"> 물을 켠 상태에서 상하 이동 테스트</li>
                        <li><input type="checkbox"> 여러 버튼을 동시에 눌렀을 때도 정상 동작</li>
                        <li><input type="checkbox"> 장시간 사용 시에도 안정적 동작</li>
                    </ul>
                </div>
            </div>

            <h3>📊 문제 진단표</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>현상</th>
                            <th>원인</th>
                            <th>해결방법</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>버튼 반응 없음</td>
                            <td>풀업 저항 미설정, 접지 불량</td>
                            <td>GPIO 풀업 설정 확인, GND 연결 점검</td>
                        </tr>
                        <tr>
                            <td>모터 움찔하고 멈춤</td>
                            <td>L298N-라즈베리파이 GND 미연결</td>
                            <td>공통 GND 연결 확인</td>
                        </tr>
                        <tr>
                            <td>모터 전혀 안 움직임</td>
                            <td>전원 부족, IN핀 연결 오류</td>
                            <td>12V/24V 전원 확인, IN1~4 재배선</td>
                        </tr>
                        <tr>
                            <td>모터 방향 반대</td>
                            <td>모터 극성 또는 IN핀 순서 오류</td>
                            <td>모터 +/- 교체 또는 IN핀 교체</td>
                        </tr>
                        <tr>
                            <td>밸브 동작 안 함</td>
                            <td>릴레이 전압 불호환, 배선 오류</td>
                            <td>3.3V 트리거 릴레이 사용 확인</td>
                        </tr>
                        <tr>
                            <td>누수 발생</td>
                            <td>밸브 방향 오류, 테프론 부족</td>
                            <td>밸브 화살표 방향 확인, 테프론 재시공</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 문제 해결 FAQ -->
        <section id="troubleshooting" class="section">
            <h2>🔧 문제 해결 FAQ</h2>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>❓ 버튼을 눌러도 반응이 없어요</span>
                    <span class="faq-toggle">▼</span>
                </div>
                <div class="faq-answer">
                    <p><strong>확인사항:</strong></p>
                    <ul>
                        <li>GPIO 풀업 저항이 설정되었는지 확인 (코드에서 <code>GPIO.PUD_UP</code>)</li>
                        <li>버튼의 한쪽이 GPIO 핀에, 다른 쪽이 GND에 연결되었는지 확인</li>
                        <li>버튼이 물리적으로 고장나지 않았는지 멀티미터로 연속성 테스트</li>
                        <li>라즈베리 파이가 정상 부팅되었는지 확인</li>
                    </ul>
                    <p><strong>해결방법:</strong> <code>gpio readall</code> 명령어로 GPIO 상태를 확인하세요.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>❓ 모터가 움찔하고 멈춰요</span>
                    <span class="faq-toggle">▼</span>
                </div>
                <div class="faq-answer">
                    <p><strong>주요 원인:</strong></p>
                    <ul>
                        <li>라즈베리 파이와 L298N의 GND가 연결되지 않음</li>
                        <li>모터 전원이 부족함 (12V 이하)</li>
                        <li>L298N 모듈 자체의 불량</li>
                    </ul>
                    <p><strong>해결방법:</strong></p>
                    <ul>
                        <li><strong>가장 중요:</strong> 모든 GND를 공통으로 연결하세요</li>
                        <li>모터 전원을 12V 이상으로 확인하세요</li>
                        <li>멀티미터로 L298N의 출력 전압을 측정해보세요</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>❓ 솔레노이드 밸브가 작동하지 않아요</span>
                    <span class="faq-toggle">▼</span>
                </div>
                <div class="faq-answer">
                    <p><strong>확인사항:</strong></p>
                    <ul>
                        <li>릴레이가 3.3V 트리거를 지원하는지 확인 (5V 전용 릴레이는 작동 안 됨)</li>
                        <li>릴레이의 '딸깍' 소리가 나는지 확인</li>
                        <li>솔레노이드 밸브에 12V/24V가 공급되는지 확인</li>
                        <li>밸브의 화살표 방향이 물 흐름과 일치하는지 확인</li>
                    </ul>
                    <p><strong>대안:</strong> 릴레이 대신 MOSFET 모듈 사용도 가능합니다.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>❓ 모터 방향이 반대예요</span>
                    <span class="faq-toggle">▼</span>
                </div>
                <div class="faq-answer">
                    <p><strong>해결방법 (둘 중 하나 선택):</strong></p>
                    <ul>
                        <li><strong>방법 1:</strong> 모터의 +/- 선을 서로 바꿔 연결</li>
                        <li><strong>방법 2:</strong> L298N의 IN핀 연결을 바꿈 (예: IN1↔IN2 교체)</li>
                    </ul>
                    <p>좌우 모터와 상하 모터를 각각 독립적으로 수정 가능합니다.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>❓ 물이 새고 있어요</span>
                    <span class="faq-toggle">▼</span>
                </div>
                <div class="faq-answer">
                    <p><strong>점검사항:</strong></p>
                    <ul>
                        <li>솔레노이드 밸브의 화살표 방향이 올바른지 확인</li>
                        <li>호스 연결부에 테프론 테이프를 충분히 감았는지 확인</li>
                        <li>호스 클램프가 단단히 조여졌는지 확인</li>
                        <li>밸브 자체의 씰링이 손상되지 않았는지 확인</li>
                    </ul>
                    <p><strong>응급처치:</strong> 누수 부위에 방수테이프를 임시로 감아주세요.</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>❓ 3D 프린트 파트가 맞지 않아요</span>
                    <span class="faq-toggle">▼</span>
                </div>
                <div class="faq-answer">
                    <p><strong>일반적인 문제:</strong></p>
                    <ul>
                        <li>나사 구멍이 너무 작음 → 드릴로 구멍을 약간 넓히세요</li>
                        <li>파트가 너무 거침 → 사포로 표면을 다듬어주세요</li>
                        <li>치수가 맞지 않음 → 프린터 캘리브레이션을 확인하세요</li>
                    </ul>
                    <p><strong>권장 나사:</strong> M3 (직경 3mm) 또는 M4 (직경 4mm) 사용</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>❓ 전력이 부족한 것 같아요</span>
                    <span class="faq-toggle">▼</span>
                </div>
                <div class="faq-answer">
                    <p><strong>전력 요구사항:</strong></p>
                    <ul>
                        <li>라즈베리 파이: 5V 3A (USB-C 어댑터)</li>
                        <li>모터 2개: 12V 또는 24V, 총 2~3A</li>
                        <li>솔레노이드 밸브: 12V/24V 1A</li>
                    </ul>
                    <p><strong>해결방법:</strong> 모터와 밸브용 별도 전원공급장치(12V 5A 이상) 사용을 권장합니다.</p>
                </div>
            </div>
        </section>

        <!-- 안전 고지 -->
        <section id="safety" class="section">
            <h2>⚠️ 안전 고지</h2>
            
            <div class="alert alert-info">
                <span class="alert-icon">💡</span>
                <div>
                    <strong>사용자 안전 가이드</strong><br><br>
                    
                    <strong>• 보조기기로서 일상을 더 편리하게</strong><br>
                    손 사용이 어려운 분들을 위한 맞춤형 샤워 보조기기입니다.<br><br>
                    
                    <strong>• 전자부품 보호</strong><br>
                    전자부품은 물이 닿지 않는 안전한 위치에 설치해 주세요.<br><br>
                    
                    <strong>• 적절한 온도 사용</strong><br>
                    편안한 온도로 조절해서 사용하시면 됩니다.<br><br>
                    
                    <strong>• 미끄럼 방지</strong><br>
                    바닥에 매트를 깔아 안전하게 사용하세요.<br><br>
                    
                    <strong>• 가족과 함께</strong><br>
                    처음 사용할 때는 가족이나 보호자와 함께 하시면 더 안전합니다.<br><br>
                    
                    <strong>• 점검과 유지보수</strong><br>
                    정기적으로 연결 상태를 확인하고 깨끗하게 관리해 주세요.
                </div>
            </div>

            <h3>✨ 안전하고 즐거운 사용을 위한 체크포인트</h3>
            <ul class="checklist">
                <li><input type="checkbox"> 사용 전 모든 전선 연결 상태 점검</li>
                <li><input type="checkbox"> 전자부품이 물에 닿지 않는 안전한 위치에 설치</li>
                <li><input type="checkbox"> 적절하고 편안한 온도의 물 사용</li>
                <li><input type="checkbox"> 바닥에 미끄럼 방지 매트 설치</li>
                <li><input type="checkbox"> 정기적인 연결부 점검 및 청소</li>
                <li><input type="checkbox"> 처음 사용시 가족이나 보호자와 함께</li>
                <li><input type="checkbox"> 문제 발생시 전원을 끄고 점검</li>
            </ul>

            <div class="alert alert-success">
                <span class="alert-icon">🎉</span>
                <div>
                    <strong>성공적인 제작을 축하합니다!</strong><br>
                    이제 여러분만의 맞춤형 보조기기가 완성되었습니다. 필요에 따라 자유롭게 개선하고, 다른 분들과도 경험을 나누어 보세요!
                </div>
            </div>
        </section>

        <!-- 제출물 목록 -->
        <section id="downloads" class="section">
            <h2>📁 제출물 목록</h2>
            
            <h3>🖨️ 3D 프린트 파일</h3>
            <div class="download-grid">
                <button class="download-btn" data-file="hardware/prints/button_deck_external.stl">
                    🔘 버튼 데크 (외부)
                </button>
                <button class="download-btn" data-file="hardware/prints/base.stl">
                    🏗️ 밑받침대
                </button>
                <button class="download-btn" data-file="hardware/prints/motor_bracket.stl">
                    ⚙️ 모터 듀얼 브래킷
                </button>
                <button class="download-btn" data-file="hardware/prints/rail_bracket.stl">
                    🔗 레일 연결 브래킷
                </button>
            </div>

            <h3>⚡ 전자 설계 파일</h3>
            <div class="download-grid">
                <button class="download-btn" data-file="electronics/wiring_diagram.pdf">
                    📋 배선도 (PDF)
                </button>
                <button class="download-btn" data-file="electronics/assembly_photos.zip">
                    📸 조립 사진
                </button>
                <button class="download-btn" data-file="electronics/block_diagram.svg">
                    📊 블록 다이어그램
                </button>
            </div>

            <h3>💻 소프트웨어 파일</h3>
            <div class="download-grid">
                <button class="download-btn" data-file="firmware/blue_shower_pi.py">
                    🐍 파이썬 제어 프로그램
                </button>
                <button class="download-btn" data-file="docs/INSTALL.md">
                    📖 설치 가이드
                </button>
                <button class="download-btn" data-file="docs/QUICKSTART_A4.pdf">
                    ⚡ 빠른 시작 가이드 (A4)
                </button>
            </div>

            <h3>📚 문서 파일</h3>
            <div class="download-grid">
                <button class="download-btn" data-file="docs/complete_manual.pdf">
                    📄 완전한 제작 매뉴얼 (PDF)
                </button>
                <button class="download-btn" data-file="docs/troubleshooting_guide.pdf">
                    🔧 문제해결 가이드
                </button>
                <button class="download-btn" data-file="docs/parts_list.xlsx">
                    📦 부품 목록 (Excel)
                </button>
            </div>

            <div class="alert alert-info">
                <span class="alert-icon">💡</span>
                <div>
                    <strong>다운로드 안내</strong><br>
                    모든 파일은 국립재활원 오픈소스 프로젝트의 일부로 제공됩니다.<br>
                    파일 사용 시 해당 라이선스를 준수해 주세요.
                </div>
            </div>
        </section>

        <!-- 버전 및 라이선스 -->
        <section id="license" class="section">
            <h2>📄 버전 및 라이선스</h2>
            
            <div class="card-grid">
                <div class="card">
                    <h4>📟 버전 정보</h4>
                    <ul>
                        <li><strong>프로젝트:</strong> Blue Shower v1.0</li>
                        <li><strong>릴리즈:</strong> 2025.08</li>
                        <li><strong>개발:</strong> 국립재활원 오픈소스 프로젝트</li>
                        <li><strong>타겟:</strong> 보조기기 DIY 제작</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>⚖️ 라이선스 정보</h4>
                    <ul>
                        <li><strong>🔧 하드웨어 설계:</strong> CERN Open Hardware Licence Version 2 - Permissive (CERN-OHL-P)</li>
                        <li><strong>💻 소프트웨어:</strong> Apache License 2.0</li>
                        <li><strong>📖 문서:</strong> Creative Commons Attribution 4.0 International (CC BY 4.0)</li>
                    </ul>
                </div>
            </div>

            <div class="alert alert-success">
                <span class="alert-icon">✅</span>
                <div>
                    <strong>오픈소스 사용 권한</strong><br>
                    • 상업적, 비상업적 목적으로 자유롭게 사용 가능<br>
                    • 수정, 개선, 재배포 허용<br>
                    • 원저작자 표시 및 라이선스 고지 필요<br>
                    • 개선사항을 커뮤니티와 공유하는 것을 권장
                </div>
            </div>

                    <h4>🤝 기여 및 커뮤니티</h4>
                <p>이 프로젝트는 보조기기가 필요한 모든 분들을 위한 오픈소스 프로젝트입니다.</p>
                <ul>
                    <li>🌟 사용 후기 및 성공 사례 공유 환영</li>
                    <li>💡 창의적인 개선 아이디어 제안</li>
                    <li>🔧 기술적 질문 및 해결 방법 공유</li>
                    <li>🎓 교육 기관에서의 학습 프로젝트로 활용</li>
                    <li>👨‍👩‍👧‍👦 가족이나 친구들과 함께 제작해보기</li>
                    <li>🚀 다른 보조기기 아이디어로 확장하기</li>
                </ul>
                
                <div class="alert alert-success">
                    <span class="alert-icon">🎯</span>
                    <div>
                        <strong>여러분의 창의력을 발휘해보세요!</strong><br>
                        이 기본 설계를 바탕으로 더 많은 기능을 추가하거나, 다른 용도로 응용할 수 있습니다. 혁신은 작은 아이디어에서 시작됩니다!
                    </div>
                </div>
        </section>
    </main>

    <footer style="text-align: center; padding: 2rem 0; margin-top: 3rem; border-top: 2px solid var(--border-color); color: var(--text-color);">
        <p><strong>Blue Shower v1.0</strong> - 국립재활원 오픈소스 보조기기 프로젝트</p>
        <p>💧 누구나 쉽게 만들고, 안전하게 사용하며, 자유롭게 개선할 수 있는 보조기기 💧</p>
        <p>🌟 <strong>당신의 아이디어가 누군가의 일상을 더 편리하게 만듭니다</strong> 🌟</p>
    </footer>

    <script>
        // 다크모드 토글
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // 고대비 모드 토글
        function toggleContrast() {
            const body = document.body;
            const currentContrast = body.getAttribute('data-contrast');
            const newContrast = currentContrast === 'high' ? 'normal' : 'high';
            body.setAttribute('data-contrast', newContrast);
            localStorage.setItem('contrast', newContrast);
        }

        // 글자 크기 조절
        function changeFontSize(change) {
            const root = document.documentElement;
            const currentSize = parseInt(getComputedStyle(root).getPropertyValue('--font-size'));
            const newSize = Math.max(12, Math.min(24, currentSize + change));
            root.style.setProperty('--font-size', newSize + 'px');
            localStorage.setItem('fontSize', newSize);
        }

        // 검색 기능
        function searchContent(query) {
            const sections = document.querySelectorAll('.section');
            const searchQuery = query.toLowerCase().trim();
            
            if (searchQuery === '') {
                sections.forEach(section => {
                    section.style.display = 'block';
                    // 하이라이트 제거
                    const highlights = section.querySelectorAll('.highlight');
                    highlights.forEach(highlight => {
                        const parent = highlight.parentNode;
                        parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                        parent.normalize();
                    });
                });
                return;
            }
            
            sections.forEach(section => {
                const text = section.textContent.toLowerCase();
                const shouldShow = text.includes(searchQuery);
                section.style.display = shouldShow ? 'block' : 'none';
                
                if (shouldShow) {
                    // 하이라이트 추가 (간단한 구현)
                    highlightText(section, searchQuery);
                }
            });
        }

        // 텍스트 하이라이트 (기본적인 구현)
        function highlightText(element, query) {
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );
            
            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                if (node.nodeValue.toLowerCase().includes(query)) {
                    textNodes.push(node);
                }
            }
            
            textNodes.forEach(textNode => {
                const parent = textNode.parentNode;
                if (parent.tagName === 'SCRIPT' || parent.tagName === 'STYLE') return;
                
                const text = textNode.nodeValue;
                const regex = new RegExp(`(${query})`, 'gi');
                const highlighted = text.replace(regex, '<span class="highlight" style="background: yellow; color: black;">$1</span>');
                
                if (highlighted !== text) {
                    const span = document.createElement('span');
                    span.innerHTML = highlighted;
                    parent.replaceChild(span, textNode);
                }
            });
        }

        // FAQ 토글
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            const toggle = element.querySelector('.faq-toggle');
            
            answer.classList.toggle('active');
            toggle.classList.toggle('active');
            
            if (answer.classList.contains('active')) {
                toggle.textContent = '▲';
            } else {
                toggle.textContent = '▼';
            }
        }

        // 코드 복사 기능
        function copyToClipboard(button) {
            const codeBlock = button.nextElementSibling;
            const text = codeBlock.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = '복사됨!';
                setTimeout(() => {
                    button.textContent = '복사';
                }, 2000);
            }).catch(() => {
                // 폴백: 텍스트 선택
                const range = document.createRange();
                range.selectNode(codeBlock);
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
            });
        }

        // 부드러운 스크롤
        document.addEventListener('DOMContentLoaded', function() {
            // 앵커 링크 클릭 시 부드러운 스크롤
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // 저장된 설정 불러오기
            const savedTheme = localStorage.getItem('theme');
            const savedContrast = localStorage.getItem('contrast');
            const savedFontSize = localStorage.getItem('fontSize');
            
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
            }
            if (savedContrast) {
                document.body.setAttribute('data-contrast', savedContrast);
            }
            if (savedFontSize) {
                document.documentElement.style.setProperty('--font-size', savedFontSize + 'px');
            }

            // 다운로드 버튼 클릭 이벤트 (실제 다운로드는 구현하지 않음)
            document.querySelectorAll('.download-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const fileName = this.getAttribute('data-file');
                    alert(`파일: ${fileName}\n\n실제 환경에서는 이 파일이 다운로드됩니다.`);
                });
            });

            // 체크리스트 상태 저장
            document.querySelectorAll('.checklist input[type="checkbox"]').forEach((checkbox, index) => {
                const key = `checklist_${index}`;
                checkbox.checked = localStorage.getItem(key) === 'true';
                
                checkbox.addEventListener('change', function() {
                    localStorage.setItem(key, this.checked);
                });
            });
        });

        // 키보드 네비게이션 개선
        document.addEventListener('keydown', function(e) {
            // Alt + T: 다크모드 토글
            if (e.altKey && e.key === 't') {
                e.preventDefault();
                toggleTheme();
            }
            // Alt + C: 고대비 토글
            if (e.altKey && e.key === 'c') {
                e.preventDefault();
                toggleContrast();
            }
            // Alt + Plus: 글자 크게
            if (e.altKey && e.key === '+') {
                e.preventDefault();
                changeFontSize(2);
            }
            // Alt + Minus: 글자 작게
            if (e.altKey && e.key === '-') {
                e.preventDefault();
                changeFontSize(-2);
            }
            // Ctrl + F: 검색창에 포커스
            if (e.ctrlKey && e.key === 'f') {
                e.preventDefault();
                document.querySelector('.search-input').focus();
            }
        });

        // 인쇄 최적화
        window.addEventListener('beforeprint', function() {
            // 인쇄 시 FAQ 모두 열기
            document.querySelectorAll('.faq-answer').forEach(answer => {
                answer.style.display = 'block';
            });
        });

        window.addEventListener('afterprint', function() {
            // 인쇄 후 FAQ 상태 복원
            document.querySelectorAll('.faq-answer').forEach(answer => {
                if (!answer.classList.contains('active')) {
                    answer.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html> 